<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ë¸Œë¼ì„ ìŠ¤í„°ë””ì¹´í˜ ë¬¸ì˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            padding: 40px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
        }

        h2 {
            color: #764ba2;
            text-align: center;
            margin-bottom: 25px;
            font-size: 20px;
        }

        .btn {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #333;
            font-weight: bold;
            margin-bottom: 8px;
        }

        input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        .back-btn {
            background: #6c757d;
            margin-top: 10px;
        }

        .back-btn:hover {
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);
        }

        .success-message {
            text-align: center;
            color: #333;
            line-height: 1.8;
        }

        .phone-list {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .phone-item {
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .phone-item:last-child {
            border-bottom: none;
        }

        .phone-item strong {
            color: #667eea;
        }

        .loading {
            display: none;
            text-align: center;
            color: #667eea;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 1í˜ì´ì§€: ì§€ì  ì„ íƒ -->
        <div id="page1" class="page active">
            <h1>ì—ë¸Œë¼ì„ ìŠ¤í„°ë””ì¹´í˜</h1>
            <h2>ì§ì˜ì  ë¬¸ì˜ì‚¬í•­</h2>
            <button class="btn" onclick="selectBranch('ì¸ì²œê³„ì–‘ë³¸ì ')">ì¸ì²œê³„ì–‘ë³¸ì </button>
            <button class="btn" onclick="selectBranch('ì¸ì²œë°•ì´Œì—­ì ')">ì¸ì²œë°•ì´Œì—­ì </button>
            <button class="btn" onclick="selectBranch('ë¶€ì²œìƒë™ì ')">ë¶€ì²œìƒë™ì </button>
            <button class="btn" onclick="selectBranch('ë¶€ì²œì‹ ì¤‘ë™ì ')">ë¶€ì²œì‹ ì¤‘ë™ì </button>
            <button class="btn" onclick="selectBranch('ë¶€í‰ì‚¼ì‚°ì ')">ë¶€í‰ì‚¼ì‚°ì </button>
        </div>

        <!-- 2í˜ì´ì§€: ë¬¸ì˜ ìœ í˜• ì„ íƒ -->
        <div id="page2" class="page">
            <h2 id="selectedBranch"></h2>
            <button class="btn" onclick="selectInquiryType('ìŠ¤í„°ë””ë£¸ ì˜ˆì•½')">ìŠ¤í„°ë””ë£¸ ì˜ˆì•½</button>
            <button class="btn" onclick="selectInquiryType('í•™ìŠµë°©í•´í–‰ìœ„ ì‹ ê³ ')">í•™ìŠµë°©í•´í–‰ìœ„ ì‹ ê³ </button>
            <button class="btn" onclick="selectInquiryType('ì˜¨ë„ì¡°ì ˆë¬¸ì˜')">ì˜¨ë„ì¡°ì ˆë¬¸ì˜</button>
            <button class="btn" onclick="showParkingNotice()">ì£¼ì°¨ì•ˆë‚´</button>
            <button class="btn" onclick="selectInquiryType('ê¸°íƒ€ ë¬¸ì˜')">ê·¸ ì™¸ ê¸°íƒ€ ë¬¸ì˜</button>
            <button class="btn back-btn" onclick="goToPage(1)">ì´ì „</button>
        </div>

        <!-- 3í˜ì´ì§€: ë¬¸ì˜ ë‚´ìš© ì‘ì„± -->
        <div id="page3" class="page">
            <h2 id="inquiryTypeTitle"></h2>
            <form id="inquiryForm">
                <div class="form-group">
                    <label for="seatNumber">ì¢Œì„ ë²ˆí˜¸</label>
                    <input type="text" id="seatNumber" placeholder="ì˜ˆ: A-12" required>
                </div>
                <div class="form-group">
                    <label for="inquiryContent">ë¬¸ì˜ ì‚¬í•­</label>
                    <textarea id="inquiryContent" placeholder="ë¬¸ì˜í•˜ì‹¤ ë‚´ìš©ì„ ìƒì„¸íˆ ì ì–´ì£¼ì„¸ìš”" required></textarea>
                </div>
                <button type="submit" class="btn">ë¬¸ì˜ ì œì¶œ</button>
                <div class="loading" id="loading">ì „ì†¡ ì¤‘...</div>
                <button type="button" class="btn back-btn" onclick="goToPage(2)">ì´ì „</button>
            </form>
        </div>

        <!-- 4í˜ì´ì§€: ì™„ë£Œ ë©”ì‹œì§€ -->
        <div id="page4" class="page">
            <div class="success-message">
                <h2>ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤</h2>
                <p>ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ë¬¸ì˜ì‚¬í•­ì„ í•´ê²°í•´ë“œë¦¬ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
                <div class="phone-list">
                    <div class="phone-item">
                        <strong>ì¸ì²œê³„ì–‘ë³¸ì </strong><br>
                        032-123-4567
                    </div>
                    <div class="phone-item">
                        <strong>ì¸ì²œë°•ì´Œì—­ì </strong><br>
                        032-234-5678
                    </div>
                    <div class="phone-item">
                        <strong>ë¶€ì²œìƒë™ì </strong><br>
                        032-345-6789
                    </div>
                    <div class="phone-item">
                        <strong>ë¶€ì²œì‹ ì¤‘ë™ì </strong><br>
                        032-456-7890
                    </div>
                    <div class="phone-item">
                        <strong>ë¶€í‰ì‚¼ì‚°ì </strong><br>
                        032-567-8901
                    </div>
                </div>
                <button class="btn" onclick="goToPage(1); resetForm();">ì²˜ìŒìœ¼ë¡œ</button>
            </div>
        </div>

        <!-- 5í˜ì´ì§€: ì£¼ì°¨ì•ˆë‚´ ê³µì§€ -->
        <div id="page5" class="page">
            <h2 id="parkingBranchTitle"></h2>
            <div class="success-message">
                <div class="phone-list">
                    <div class="phone-item" style="border: none; padding: 20px;">
                        <p id="parkingNoticeContent" style="line-height: 1.8; color: #333; font-size: 16px; white-space: pre-line;"></p>
                    </div>
                </div>
                <button class="btn" onclick="goToPage(2)">ì´ì „</button>
                <button class="btn back-btn" onclick="goToPage(1)">ì²˜ìŒìœ¼ë¡œ</button>
            </div>
        </div>
    </div>

    <script>
        let selectedBranch = '';
        let selectedInquiryType = '';

        const parkingInfo = {
            'ì¸ì²œê³„ì–‘ë³¸ì ': 'ì§€í•˜ì£¼ì°¨ì¥ì´ ìˆì§€ë§Œ í˜‘ì†Œí•˜ê¸°ì— ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤',
            'ì¸ì²œë°•ì´Œì—­ì ': 'ì¹´í˜ ë’¤í¸ì— ì£¼ì°¨ì¥ì†Œê°€ ìˆì§€ë§Œ ë§¤ìš° í˜‘ì†Œí•˜ê¸°ì— ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤',
            'ë¶€ì²œìƒë™ì ': 'ì§€í•˜ ì£¼ì°¨ì¥ì€ ë¬´ë£Œ(ë“¤ì–´ê°€ê¸° ë§¤ìš° í˜‘ì†Œ), ì¹´í˜ ì˜† ê³µì˜ì£¼ì°¨ì¥ì€ ì‚¬ì´ë“œë¶€ë¶„ë§Œ ë¬´ë£Œì´ë‹ˆ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.',
            'ë¶€ì²œì‹ ì¤‘ë™ì ': 'ì£¼ì°¨ê°€ ë¶ˆê°€í•˜ë‹ˆ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.',
            'ë¶€í‰ì‚¼ì‚°ì ': 'ì•„íŒŒíŠ¸ ì£¼ì°¨ì¥ì´ ìˆìœ¼ë‚˜ ì´ìš©í•˜ê¸° ì–´ë ¤ìš¸ ë•Œê°€ ìˆìœ¼ë‹ˆ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤'
        };

        function goToPage(pageNum) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById('page' + pageNum).classList.add('active');
        }

        function selectBranch(branch) {
            selectedBranch = branch;
            document.getElementById('selectedBranch').textContent = branch;
            goToPage(2);
        }

        function selectInquiryType(type) {
            selectedInquiryType = type;
            document.getElementById('inquiryTypeTitle').textContent = `${selectedBranch} - ${type}`;
            document.getElementById('inquiryContent').value = '';
            goToPage(3);
        }

        function showParkingNotice() {
            const info = parkingInfo[selectedBranch];
            document.getElementById('parkingBranchTitle').textContent = `${selectedBranch} ì£¼ì°¨ ì•ˆë‚´`;
            document.getElementById('parkingNoticeContent').textContent = info;
            goToPage(5);
        }

        function resetForm() {
            document.getElementById('inquiryForm').reset();
            document.getElementById('inquiryContent').value = '';
            selectedBranch = '';
            selectedInquiryType = '';
        }

        document.getElementById('inquiryForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const seatNumber = document.getElementById('seatNumber').value;
            const inquiryContent = document.getElementById('inquiryContent').value;
            const loading = document.getElementById('loading');
            
            const message = `ğŸ”” ìƒˆë¡œìš´ ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤\n\n` +
                          `ğŸ¢ ì§€ì : ${selectedBranch}\n` +
                          `ğŸ“‹ ë¬¸ì˜ ìœ í˜•: ${selectedInquiryType}\n` +
                          `ğŸ’º ì¢Œì„ ë²ˆí˜¸: ${seatNumber}\n\n` +
                          `ğŸ“ ë¬¸ì˜ ë‚´ìš©:\n${inquiryContent}`;
            
            loading.style.display = 'block';
            
            try {
                const response = await fetch('/api/sendMessage', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ message })
                });

                if (response.ok) {
                    goToPage(4);
                } else {
                    alert('ë¬¸ì˜ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('ë¬¸ì˜ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            } finally {
                loading.style.display = 'none';
            }
        });
    </script>
</body>
</html>
